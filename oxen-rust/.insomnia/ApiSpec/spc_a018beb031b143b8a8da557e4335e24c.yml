_id: spc_a018beb031b143b8a8da557e4335e24c
type: ApiSpec
parentId: wrk_a338448f888541f8a5fb7e5c31f1298e
modified: 1660923728964
created: 1660583561185
fileName: OxenServer
contents: |-
  openapi: 3.0.0
  info:
    description: "Documentation for the OxenServer API"
    version: 0.2.0
    title: OxenServer API
  tags:
    - name: repository
    - name: commits
    - name: branches
    - name: dir
      description: Directory listing for a resource
    - name: file
      description: File access for a resource
  servers:
    - url: http://localhost:3000

  paths:
    /oxen/repositories:
      post:
        tags:
          - repository
        summary: Create a new repository
        description: ""
        operationId: createRepository
        requestBody:
          $ref: "#/components/requestBodies/Repository"
        responses:
          "400":
            description: Bad request
    /oxen/{namespace}:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
      get:
        tags:
          - repository
        summary: List repositories for a namespace
        operationId: getRepositoriesForNamespace
        responses:
          "200":
            description: OK
    /oxen/{namespace}/{repoName}:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
      get:
        tags:
          - repository
        summary: Get repository
        operationId: getRepository
        responses:
          "200":
            description: OK
      delete:
        tags:
          - repository
        summary: Get repository
        operationId: deleteRepository
        responses:
          "200":
            description: OK
    /oxen/{namespace}/{repoName}/commits:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
      get:
        tags:
          - commits
        summary: List commits for the default branch
        operationId: listCommits
        responses:
          "200":
            description: OK
      post:
        tags:
          - commits
        summary: Create a new commit
        operationId: createCommit
        responses:
          "200":
            description: OK
    /oxen/{namespace}/{repoName}/commits/{commitOrBranch}:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
        - $ref: '#/components/parameters/commitOrBranchParam'
      get:
        tags:
          - commits
        summary: Get commit
        operationId: getCommit
        responses:
          "200":
            description: OK
            
    /oxen/{namespace}/{repoName}/commits/{commitOrBranch}/history:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
        - $ref: '#/components/parameters/commitOrBranchParam'
      get:
        tags:
          - commits
        summary: List history for the specified commit
        operationId: getCommitHistory
        responses:
          "200":
            description: OK
    
    /oxen/{namespace}/{repoName}/commits/{commitOrBranch}/parents:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
        - $ref: '#/components/parameters/commitOrBranchParam'
      get:
        tags:
          - commits
        summary: List parent for the specified commit
        operationId: listCommitParentsForId
        responses:
          "200":
            description: OK  
    
    /oxen/{namespace}/{repoName}/branches:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
      get:
        tags:
          - branches
        summary: List branches
        operationId: listBranches
        responses:
          "200":
            description: OK
      post:
        tags:
          - branches
        summary: Create a new branch
        operationId: createBranch
        responses:
          "200":
            description: OK
    /oxen/{namespace}/{repoName}/branches/{branchName}:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
        - $ref: '#/components/parameters/branchNameParam'
      get:
        tags:
          - branches
        summary: Get branch
        operationId: getBranch
        responses:
          "200":
            description: OK
      delete:
        tags:
          - branches
        summary: Delete a branch
        operationId: deleteBranch
        responses:
          "200":
            description: OK
    /oxen/{namespace}/{repoName}/dir/{resource}:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
        - $ref: '#/components/parameters/resourceParam'
      get:
        tags:
          - dir
        summary: List directory for resource
        operationId: getResource
        responses:
          "200":
            description: OK
    /oxen/{namespace}/{repoName}/file/{resource}:
      parameters:
        - $ref: '#/components/parameters/namespaceParam'
        - $ref: '#/components/parameters/repoNameParam'
        - $ref: '#/components/parameters/resourceParam'
      get:
        tags:
          - file
        summary: Get a file for resource
        operationId: getFile
        responses:
          "200":
            description: OK
    
  components:
    parameters:
      namespaceParam:
        name: namespace
        in: path
        required: true
        schema:
          type: string
      repoNameParam:
        name: repoName
        in: path
        required: true
        schema:
          type: string
      commitOrBranchParam:
        name: commitOrBranch
        in: path
        required: true
        schema:
          type: string
      branchNameParam:
        name: branchName
        in: path
        required: true
        schema:
          type: string
      resourceParam:
        name: resource
        description: A combination of branch or commit ID plus a path
        in: path
        required: true
        schema:
          type: string
    requestBodies:
      Repository:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Repository"
        description: Repository object to create
        required: true
    schemas:
      Repository:
        type: object
        properties:
          namespace:
            type: string
          name:
            type: string
contentType: yaml
